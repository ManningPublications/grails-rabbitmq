<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>2.3 Advanced Configuration 1.0.0</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction To The RabbitMQ Plugin</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/configuration.html"><strong>2</strong><span>Configuration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/sendingMessages.html"><strong>3</strong><span>Sending Messages</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/consumingMessages.html"><strong>4</strong><span>Consuming Messages</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/rabbitTemplate.html"><strong>5</strong><span>Using The RabbitTemplate Directly</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>The RabbitMQ plugin provides integration with the RabbitMQ Messaging System.</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/introduction.html">&lt;&lt; <strong>1</strong><span>Introduction To The RabbitMQ Plugin</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/sendingMessages.html"><strong>3</strong><span>Sending Messages</span> >></a></div>
                


                <div class="project">
                    <h1>2.3 Advanced Configuration - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Jeff Brown, Peter Ledbrook</p>

                    <p><strong>Version:</strong> 1.0.0</p>

                    
                </div>

                

                

<h2 id="advancedConfig">2.3 Advanced Configuration</h2>
When you need fine-grained control over your service listeners, you can tap into the power of Spring. Since each service listener is implemented as a set of Spring beans, you can use Grails' <a href="http://grails.org/doc/latest/guide/spring.html#propertyOverrideConfiguration" target="blank">bean property override</a> mechanism to provide your own low-level settings.<p class="paragraph"/>So how are these beans set up? If a service has either a <code>rabbitQueue</code> or <code>rabbitSubscribe</code> property, then you will have these beans:
<ul class="star">
<li><code>&#60;serviceName&#62;_MessageListenerContainer</code> of type <a href="http://static.springsource.org/spring-amqp/docs/1.0.x/apidocs/org/springframework/amqp/rabbit/listener/SimpleMessageListenerContainer.html" class="api">SimpleMessageListenerContainer</a></li>
<li><code>&#60;serviceName&#62;RabbitAdapter</code> of type <a href="http://static.springsource.org/spring-amqp/docs/1.0.x/apidocs/org/springframework/amqp/rabbit/listener/adapter/MessageListenerAdapter.html" class="api">MessageListenerAdapter</a></li>
</ul><p class="paragraph"/>As an example, let's say you have a <code>MessageStoreService</code> like so:<p class="paragraph"/><div class="code"><pre>class MessageStoreService &#123;
    <span class="java&#45;keyword">static</span> rabbitSubscribe = &#91;exchange: <span class="java&#45;quote">"amq.topic"</span>, routingKey: <span class="java&#45;quote">"logs.&#35;"</span>&#93;
    &#8230;
&#125;</pre></div><p class="paragraph"/>You can then customise things like the number of concurrent consumers, whether the channel is transacted, what the prefetch count should be, and more! Simply add code like this to your runtime configuration (Config.groovy):<p class="paragraph"/><div class="code"><pre>beans &#123;
    messageStoreService_MessageListenerContainer &#123;
        channelTransacted = <span class="java&#45;keyword">false</span>
        concurrentConsumers = 10
        prefetchCount = 5
        queueNames = &#91;<span class="java&#45;quote">"q1"</span>, <span class="java&#45;quote">"q2"</span>&#93; as <span class="java&#45;object">String</span>&#91;&#93;
    &#125;<p class="paragraph"/>    messageStoreServiceRabbitAdapter &#123;
        encoding = <span class="java&#45;quote">"UTF&#45;8"</span>
        responseRoutingKey = <span class="java&#45;quote">"replyQueue"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/>This approach works for any property that accepts a basic type. But what about bean references? In this case, you can't use the bean property overrides. Fortunately, the most common bean reference you are likely to want to override, the message converter, has a dedicated configuration option:<p class="paragraph"/><div class="code"><pre>rabbitmq.messageConverterBean = <span class="java&#45;quote">"myCustomMessageConverter"</span></pre></div><p class="paragraph"/>This is a global setting that accepts the name of a message converter bean. For the rare occasions that you need to override other bean references, you can declare your own <code>&#60;serviceName&#62;_MessageListenerContainer</code> or <code>&#60;serviceName&#62;_RabbitAdapter</code> beans in resources.groovy.<p class="paragraph"/>Finally, you can override some of the global config options on a per-service basis:<p class="paragraph"/><div class="code"><pre>rabbitmq &#123;
    services &#123;
        messageStoreService &#123;
            concurrentConsumers = 50
            disableListening = <span class="java&#45;keyword">true</span>
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/>There are many options for customisation and we hope the above will get you started.



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/introduction.html">&lt;&lt; <strong>1</strong><span>Introduction To The RabbitMQ Plugin</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/sendingMessages.html"><strong>3</strong><span>Sending Messages</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">All Classes</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/All%20Classes/rabbitSend.html">rabbitSend</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
